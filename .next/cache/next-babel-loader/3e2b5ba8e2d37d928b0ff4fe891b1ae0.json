{"ast":null,"code":"import { createToken } from '@octokit/oauth-app';\nexport default (async (req, res) => {\n  if (req.method === 'POST') {\n    const {\n      token,\n      scopes\n    } = await createToken({\n      clientId: process.env.CLIENT_ID,\n      clientSecret: process.env.CLIENT_SECRET,\n      state: req.body.state,\n      code: req.body.code\n    });\n    return res.json({\n      token,\n      scopes\n    });\n  }\n\n  throw new Error(`${req.method} not supported`);\n});","map":{"version":3,"sources":["/Users/barrast/Desktop/Projects/erxe/app/pages/api/github/oauth/token.ts"],"names":["createToken","req","res","method","token","scopes","clientId","process","env","CLIENT_ID","clientSecret","CLIENT_SECRET","state","body","code","json","Error"],"mappings":"AACA,SAASA,WAAT,QAA4B,oBAA5B;AAEA,gBAAe,OAAOC,GAAP,EAAwBC,GAAxB,KAA6C;AAC1D,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAoB,MAAML,WAAW,CAAC;AAC1CM,MAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADoB;AAE1CC,MAAAA,YAAY,EAAEH,OAAO,CAACC,GAAR,CAAYG,aAFgB;AAG1CC,MAAAA,KAAK,EAAEX,GAAG,CAACY,IAAJ,CAASD,KAH0B;AAI1CE,MAAAA,IAAI,EAAEb,GAAG,CAACY,IAAJ,CAASC;AAJ2B,KAAD,CAA3C;AAOA,WAAOZ,GAAG,CAACa,IAAJ,CAAS;AAAEX,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAT,CAAP;AACD;;AAED,QAAM,IAAIW,KAAJ,CAAW,GAAEf,GAAG,CAACE,MAAO,gBAAxB,CAAN;AACD,CAbD","sourcesContent":["import { NowRequest, NowResponse } from '@now/node';\nimport { createToken } from '@octokit/oauth-app';\n\nexport default async (req: NowRequest, res: NowResponse) => {\n  if (req.method === 'POST') {\n    const { token, scopes } = await createToken({\n      clientId: process.env.CLIENT_ID,\n      clientSecret: process.env.CLIENT_SECRET,\n      state: req.body.state as string,\n      code: req.body.code as string,\n    });\n\n    return res.json({ token, scopes });\n  }\n\n  throw new Error(`${req.method} not supported`);\n};\n"]},"metadata":{},"sourceType":"module"}