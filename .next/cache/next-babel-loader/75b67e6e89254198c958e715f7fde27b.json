{"ast":null,"code":"var _jsxFileName = \"/Users/barrast/Desktop/Projects/erxe/app/pages/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { request } from '@octokit/request';\n\nfunction Home(props) {\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 5,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6,\n      columnNumber: 7\n    }\n  }, \"Hello world!\"), __jsx(\"a\", {\n    href: \"/api/github/oauth/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 7\n    }\n  }, \"Login with GitHub\"), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 7\n    }\n  }, \"Token: $\", props.token));\n}\n\nHome.getInitialProps = async ({\n  req\n}) => {\n  var _req$query;\n\n  const code = (_req$query = req.query) === null || _req$query === void 0 ? void 0 : _req$query.code;\n\n  if (!code) {\n    return {\n      token: ''\n    };\n  } // Exchange code for token\n\n\n  const response = await request(`POST ${location.origin}/api/github/oauth/token`, {\n    code\n  });\n  return {\n    token: response.data.token\n  };\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/barrast/Desktop/Projects/erxe/app/pages/index.tsx"],"names":["request","Home","props","token","getInitialProps","req","code","query","response","location","origin","data"],"mappings":";;;AAAA,SAASA,OAAT,QAAwB,kBAAxB;;AAEA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACnB,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAG,IAAA,IAAI,EAAC,yBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAaA,KAAK,CAACC,KAAnB,CAHF,CADF;AAOD;;AAEDF,IAAI,CAACG,eAAL,GAAuB,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAmB;AAAA;;AACxC,QAAMC,IAAI,iBAAGD,GAAG,CAACE,KAAP,+CAAG,WAAWD,IAAxB;;AACA,MAAI,CAACA,IAAL,EAAW;AACT,WAAO;AAAEH,MAAAA,KAAK,EAAE;AAAT,KAAP;AACD,GAJuC,CAMxC;;;AACA,QAAMK,QAAQ,GAAG,MAAMR,OAAO,CAC3B,QAAOS,QAAQ,CAACC,MAAO,yBADI,EAE5B;AACEJ,IAAAA;AADF,GAF4B,CAA9B;AAOA,SAAO;AAAEH,IAAAA,KAAK,EAAEK,QAAQ,CAACG,IAAT,CAAcR;AAAvB,GAAP;AACD,CAfD;;AAiBA,eAAeF,IAAf","sourcesContent":["import { request } from '@octokit/request';\n\nfunction Home(props) {\n  return (\n    <div>\n      <h1>Hello world!</h1>\n      <a href=\"/api/github/oauth/login\">Login with GitHub</a>\n      <h2>Token: ${props.token}</h2>\n    </div>\n  );\n}\n\nHome.getInitialProps = async ({ req }) => {\n  const code = req.query?.code;\n  if (!code) {\n    return { token: '' };\n  }\n\n  // Exchange code for token\n  const response = await request(\n    `POST ${location.origin}/api/github/oauth/token`,\n    {\n      code,\n    }\n  );\n\n  return { token: response.data.token };\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}