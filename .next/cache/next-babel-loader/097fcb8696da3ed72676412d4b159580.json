{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/barrast/Desktop/Projects/erxe/app/pages/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { request } from '@octokit/request';\nimport UserMe from '../components/UserMe';\nimport initializeClient from '../graphql/client';\n\nfunction Home(props) {\n  if (!props.token) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 9,\n        columnNumber: 7\n      }\n    }, __jsx(\"a\", {\n      href: \"/api/github/oauth/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 9\n      }\n    }, \"Login with GitHub\"));\n  }\n\n  var client = initializeClient(props.token);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, __jsx(UserMe, {\n    client: client,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }\n  }));\n}\n\nHome.getInitialProps = function _callee(_ref) {\n  var _req$query;\n\n  var req, code, response;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          req = _ref.req;\n          console.log('HELLOOOO');\n          code = (_req$query = req.query) === null || _req$query === void 0 ? void 0 : _req$query.code;\n\n          if (code) {\n            _context.next = 5;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            token: ''\n          });\n\n        case 5:\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(request(\"POST \".concat(location.origin, \"/api/github/oauth/token\"), {\n            code: code\n          }));\n\n        case 7:\n          response = _context.sent;\n          return _context.abrupt(\"return\", {\n            token: response.data.token\n          });\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/barrast/Desktop/Projects/erxe/app/pages/index.tsx"],"names":["request","UserMe","initializeClient","Home","props","token","client","getInitialProps","req","console","log","code","query","location","origin","response","data"],"mappings":";;;;AAAA,SAASA,OAAT,QAAwB,kBAAxB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,gBAAP,MAA6B,mBAA7B;;AAEA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACnB,MAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,IAAI,EAAC,yBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF;AAKD;;AAED,MAAMC,MAAM,GAAGJ,gBAAgB,CAACE,KAAK,CAACC,KAAP,CAA/B;AAEA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,MAAM,EAAEC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAEDH,IAAI,CAACI,eAAL,GAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,UAAAA,GAAT,QAASA,GAAT;AACrBC,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACMC,UAAAA,IAFe,iBAERH,GAAG,CAACI,KAFI,+CAER,WAAWD,IAFH;;AAAA,cAGhBA,IAHgB;AAAA;AAAA;AAAA;;AAAA,2CAIZ;AAAEN,YAAAA,KAAK,EAAE;AAAT,WAJY;;AAAA;AAAA;AAAA,2CAQEL,OAAO,gBACpBa,QAAQ,CAACC,MADW,8BAE5B;AACEH,YAAAA,IAAI,EAAJA;AADF,WAF4B,CART;;AAAA;AAQfI,UAAAA,QARe;AAAA,2CAed;AAAEV,YAAAA,KAAK,EAAEU,QAAQ,CAACC,IAAT,CAAcX;AAAvB,WAfc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;;AAkBA,eAAeF,IAAf","sourcesContent":["import { request } from '@octokit/request';\n\nimport UserMe from '../components/UserMe';\nimport initializeClient from '../graphql/client';\n\nfunction Home(props) {\n  if (!props.token) {\n    return (\n      <div>\n        <a href=\"/api/github/oauth/login\">Login with GitHub</a>\n      </div>\n    );\n  }\n\n  const client = initializeClient(props.token);\n\n  return (\n    <div>\n      <UserMe client={client} />\n    </div>\n  );\n}\n\nHome.getInitialProps = async ({ req }) => {\n  console.log('HELLOOOO');\n  const code = req.query?.code;\n  if (!code) {\n    return { token: '' };\n  }\n\n  // Exchange code for token\n  const response = await request(\n    `POST ${location.origin}/api/github/oauth/token`,\n    {\n      code,\n    }\n  );\n\n  return { token: response.data.token };\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}